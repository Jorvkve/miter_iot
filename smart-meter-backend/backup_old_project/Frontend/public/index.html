<!doctype html>
<html lang="th">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Smart Meter Dashboard</title>

    <link
      href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css"
      rel="stylesheet"
    />

    <link
      rel="stylesheet"
      href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css"
    />

    <link rel="stylesheet" href="style.css" />
  </head>
  <body>
    <div class="container py-5">
      <h1 class="text-center">
        <i class="fas fa-bolt text-warning"></i> IOT-BASED ELECTRICITY METER
        MONITORING SYSTEM
      </h1>
      <p class="text-center text-muted mb-5">
        ‡∏£‡∏∞‡∏ö‡∏ö‡∏ï‡∏¥‡∏î‡∏ï‡∏≤‡∏°‡∏Å‡∏≤‡∏£‡πÉ‡∏ä‡πâ‡πÑ‡∏ü‡∏ü‡πâ‡∏≤‡∏ú‡πà‡∏≤‡∏ô‡∏°‡∏¥‡πÄ‡∏ï‡∏≠‡∏£‡πå‡πÑ‡∏ü‡∏ü‡πâ‡∏≤ IoT
      </p>

      <!-- === ‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡πÅ‡∏ó‡πá‡∏ö‡∏°‡∏π‡∏•‡∏Ñ‡πà‡∏≤ === -->
      <ul class="nav nav-tabs mb-4" id="chartTabs" role="tablist">
        <li class="nav-item" role="presentation">
          <button
            class="nav-link active"
            id="home-tab"
            data-bs-toggle="tab"
            data-bs-target="#realtime"
            type="button"
            role="tab"
          >
            üìä ‡∏Å‡∏£‡∏≤‡∏ü‡∏£‡∏µ‡πÑ‡∏ó‡∏°‡πå
          </button>
        </li>
        <li class="nav-item" role="presentation">
          <button
            class="nav-link"
            id="monthly-tab"
            data-bs-toggle="tab"
            data-bs-target="#monthly"
            type="button"
            role="tab"
          >
            üìà ‡∏Å‡∏£‡∏≤‡∏ü‡∏£‡∏≤‡∏¢‡πÄ‡∏î‡∏∑‡∏≠‡∏ô
          </button>
        </li>
        <li class="nav-item" role="presentation">
          <button
            class="nav-link"
            id="admin-tab"
            data-bs-toggle="tab"
            data-bs-target="#admin"
            type="button"
            role="tab"
          >
            ‚öôÔ∏è Admin
          </button>
        </li>
      </ul>

      <!-- === ‡πÅ‡∏ó‡πá‡∏ö‡∏Å‡∏£‡∏≤‡∏ü‡∏£‡∏µ‡πÑ‡∏ó‡∏°‡πå === -->
      <div class="tab-content" id="chartTabContent">
        <div class="tab-pane fade show active" id="realtime" role="tabpanel">
          <!-- ‡∏Å‡∏£‡∏≤‡∏ü‡∏£‡∏ß‡∏° -->
          <div class="row mb-4">
            <div class="col-md-12">
              <div class="card">
                <div class="card-header">
                  <i class="fas fa-chart-line me-2"></i> ‡∏Å‡∏£‡∏≤‡∏ü‡∏Å‡∏≤‡∏£‡πÉ‡∏ä‡πâ‡πÑ‡∏ü‡∏ü‡πâ‡∏≤‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î
                  (‡∏£‡∏ß‡∏° 3 ‡∏ö‡πâ‡∏≤‡∏ô)
                </div>
                <div class="card-body p-0">
                  <div id="chart_combined" style="height: 350px; width: 100%">
                    <div
                      class="d-flex justify-content-center align-items-center h-100 text-muted"
                    >
                      <span
                        ><i class="fas fa-spinner fa-spin me-2"></i>
                        ‡∏Å‡∏≥‡∏•‡∏±‡∏á‡πÇ‡∏´‡∏•‡∏î‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•...</span
                      >
                    </div>
                  </div>
                </div>
              </div>
            </div>
          </div>

          <!-- ‡∏Å‡∏£‡∏≤‡∏ü‡πÅ‡∏¢‡∏Å‡∏ö‡πâ‡∏≤‡∏ô -->
          <div class="row mb-4">
            <div class="col-md-4">
              <div class="card">
                <div class="card-header">
                  <i class="fas fa-home me-2 text-primary"></i> ‡∏ö‡πâ‡∏≤‡∏ô‡∏ó‡∏µ‡πà 1
                </div>
                <div class="card-body">
                  <div class="stats-box mb-3">
                    <div class="stat-item">
                      <span class="stat-label">üÜï ‡∏°‡∏¥‡πÄ‡∏ï‡∏≠‡∏£‡πå‡∏•‡πà‡∏≤‡∏™‡∏∏‡∏î:</span>
                      <span class="stat-value" id="house1_latest">-</span>
                    </div>
                    <div class="stat-item">
                      <span class="stat-label">üìä ‡∏°‡∏¥‡πÄ‡∏ï‡∏≠‡∏£‡πå‡πÄ‡∏Å‡πà‡∏≤‡∏™‡∏∏‡∏î:</span>
                      <span class="stat-value" id="house1_oldest">-</span>
                    </div>
                    <div class="stat-item highlight">
                      <span class="stat-label">‚ö° ‡πÉ‡∏ä‡πâ‡πÑ‡∏õ‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î:</span>
                      <span class="stat-value" id="house1_usage">-</span>
                    </div>
                  </div>
                </div>
                <div class="card-body p-0">
                  <div id="chart_house1" style="height: 250px; width: 100%">
                    <div
                      class="d-flex justify-content-center align-items-center h-100 text-muted"
                    >
                      <span
                        ><i class="fas fa-spinner fa-spin me-2"></i>
                        ‡πÇ‡∏´‡∏•‡∏î...</span
                      >
                    </div>
                  </div>
                </div>
              </div>
            </div>
            <div class="col-md-4">
              <div class="card">
                <div class="card-header">
                  <i class="fas fa-home me-2 text-success"></i> ‡∏ö‡πâ‡∏≤‡∏ô‡∏ó‡∏µ‡πà 2
                </div>
                <div class="card-body">
                  <div class="stats-box mb-3">
                    <div class="stat-item">
                      <span class="stat-label">üÜï ‡∏°‡∏¥‡πÄ‡∏ï‡∏≠‡∏£‡πå‡∏•‡πà‡∏≤‡∏™‡∏∏‡∏î:</span>
                      <span class="stat-value" id="house2_latest">-</span>
                    </div>
                    <div class="stat-item">
                      <span class="stat-label">üìä ‡∏°‡∏¥‡πÄ‡∏ï‡∏≠‡∏£‡πå‡πÄ‡∏Å‡πà‡∏≤‡∏™‡∏∏‡∏î:</span>
                      <span class="stat-value" id="house2_oldest">-</span>
                    </div>
                    <div class="stat-item highlight">
                      <span class="stat-label">‚ö° ‡πÉ‡∏ä‡πâ‡πÑ‡∏õ‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î:</span>
                      <span class="stat-value" id="house2_usage">-</span>
                    </div>
                  </div>
                </div>
                <div class="card-body p-0">
                  <div id="chart_house2" style="height: 250px; width: 100%">
                    <div
                      class="d-flex justify-content-center align-items-center h-100 text-muted"
                    >
                      <span
                        ><i class="fas fa-spinner fa-spin me-2"></i>
                        ‡πÇ‡∏´‡∏•‡∏î...</span
                      >
                    </div>
                  </div>
                </div>
              </div>
            </div>
            <div class="col-md-4">
              <div class="card">
                <div class="card-header">
                  <i class="fas fa-home me-2 text-danger"></i> ‡∏ö‡πâ‡∏≤‡∏ô‡∏ó‡∏µ‡πà 3
                </div>
                <div class="card-body">
                  <div class="stats-box mb-3">
                    <div class="stat-item">
                      <span class="stat-label">üÜï ‡∏°‡∏¥‡πÄ‡∏ï‡∏≠‡∏£‡πå‡∏•‡πà‡∏≤‡∏™‡∏∏‡∏î:</span>
                      <span class="stat-value" id="house3_latest">-</span>
                    </div>
                    <div class="stat-item">
                      <span class="stat-label">üìä ‡∏°‡∏¥‡πÄ‡∏ï‡∏≠‡∏£‡πå‡πÄ‡∏Å‡πà‡∏≤‡∏™‡∏∏‡∏î:</span>
                      <span class="stat-value" id="house3_oldest">-</span>
                    </div>
                    <div class="stat-item highlight">
                      <span class="stat-label">‚ö° ‡πÉ‡∏ä‡πâ‡πÑ‡∏õ‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î:</span>
                      <span class="stat-value" id="house3_usage">-</span>
                    </div>
                  </div>
                </div>
                <div class="card-body p-0">
                  <div id="chart_house3" style="height: 250px; width: 100%">
                    <div
                      class="d-flex justify-content-center align-items-center h-100 text-muted"
                    >
                      <span
                        ><i class="fas fa-spinner fa-spin me-2"></i>
                        ‡πÇ‡∏´‡∏•‡∏î...</span
                      >
                    </div>
                  </div>
                </div>
              </div>
            </div>
          </div>

          <div class="card">
            <div class="card-header">
              <i class="fas fa-list-ul me-2"></i> ‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£‡∏≠‡πà‡∏≤‡∏ô‡∏Ñ‡πà‡∏≤‡∏•‡πà‡∏≤‡∏™‡∏∏‡∏î
            </div>
            <div class="card-body p-0">
              <div class="table-responsive readings-scroll">
                <table
                  class="table table-hover align-middle mb-0"
                  id="readingsTable"
                >
                  <thead>
                    <tr>
                      <th class="ps-4">
                        <i class="far fa-clock me-1"></i> ‡πÄ‡∏ß‡∏•‡∏≤‡∏ó‡∏µ‡πà‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å
                      </th>
                      <th><i class="fas fa-home me-1"></i> ‡∏ö‡πâ‡∏≤‡∏ô</th>
                      <th>
                        <i class="fas fa-tachometer-alt me-1"></i> ‡∏Ñ‡πà‡∏≤‡∏°‡∏¥‡πÄ‡∏ï‡∏≠‡∏£‡πå
                        (‡∏´‡∏ô‡πà‡∏ß‡∏¢)
                      </th>
                      <th><i class="far fa-image me-1"></i> ‡∏´‡∏•‡∏±‡∏Å‡∏ê‡∏≤‡∏ô</th>
                    </tr>
                  </thead>
                  <tbody></tbody>
                </table>
              </div>
            </div>
          </div>
        </div>

        <!-- === ‡πÅ‡∏ó‡πá‡∏ö‡∏Å‡∏£‡∏≤‡∏ü‡∏£‡∏≤‡∏¢‡πÄ‡∏î‡∏∑‡∏≠‡∏ô === -->
        <div class="tab-pane fade" id="monthly" role="tabpanel">
          <div class="row mb-4">
            <div class="col-md-12">
              <div class="card">
                <div class="card-header">
                  <i class="fas fa-chart-bar me-2"></i> 
                  ‡∏™‡∏£‡∏∏‡∏õ‡∏õ‡∏£‡∏∞‡∏à‡∏≥‡πÄ‡∏î‡∏∑‡∏≠‡∏ô (‡∏£‡∏ß‡∏° 3‡∏ö‡πâ‡∏≤‡∏ô)
                </div>
                <div class="card-body p-0">
                  <!-- ‡∏Å‡∏£‡∏≤‡∏ü‡∏™‡∏£‡∏∏‡∏õ‡∏£‡∏≤‡∏¢‡πÄ‡∏î‡∏∑‡∏≠‡∏ô -->
                  <canvas id="monthlyChart" height="120"></canvas>
                  <!-- ‡∏Å‡∏£‡∏≤‡∏ü‡∏£‡∏ß‡∏°‡∏ó‡∏∏‡∏Å‡∏ö‡πâ‡∏≤‡∏ô -->
                  <div class="mt-4">
                    <canvas id="totalUsageChart" height="120"></canvas>
                  </div>
                </div>
                </div>
              </div>
            </div>
          </div>

          <div class="row">
            <div class="col-md-4">
              <div class="card">
                <div class="card-header">
                  <i class="fas fa-home me-2 text-primary"></i> ‡∏ö‡πâ‡∏≤‡∏ô‡∏ó‡∏µ‡πà 1
                  (‡∏£‡∏≤‡∏¢‡πÄ‡∏î‡∏∑‡∏≠‡∏ô)
                </div>
                <div class="card-body">
                  <div class="stats-box mb-3">
                    <div class="stat-item">
                      <span class="stat-label">üìà ‡∏°‡∏¥‡πÄ‡∏ï‡∏≠‡∏£‡πå‡∏™‡∏π‡∏á‡∏™‡∏∏‡∏î:</span>
                      <span class="stat-value" id="house1_monthly_max">-</span>
                    </div>
                    <div class="stat-item">
                      <span class="stat-label">üìâ ‡∏°‡∏¥‡πÄ‡∏ï‡∏≠‡∏£‡πå‡∏ï‡πà‡∏≥‡∏™‡∏∏‡∏î:</span>
                      <span class="stat-value" id="house1_monthly_min">-</span>
                    </div>
                    <div class="stat-item highlight">
                      <span class="stat-label">üìä ‡∏Ñ‡πà‡∏≤‡πÄ‡∏â‡∏•‡∏µ‡πà‡∏¢:</span>
                      <span class="stat-value" id="house1_monthly_avg">-</span>
                    </div>
                  </div>
                </div>
                <div class="card-body p-0">
                  <div
                    id="chart_monthly_house1"
                    style="height: 250px; width: 100%"
                  >
                    <div
                      class="d-flex justify-content-center align-items-center h-100 text-muted"
                    >
                      <span
                        ><i class="fas fa-spinner fa-spin me-2"></i>
                        ‡πÇ‡∏´‡∏•‡∏î...</span
                      >
                    </div>
                  </div>
                </div>
              </div>
            </div>
            <div class="col-md-4">
              <div class="card">
                <div class="card-header">
                  <i class="fas fa-home me-2 text-success"></i> ‡∏ö‡πâ‡∏≤‡∏ô‡∏ó‡∏µ‡πà 2
                  (‡∏£‡∏≤‡∏¢‡πÄ‡∏î‡∏∑‡∏≠‡∏ô)
                </div>
                <div class="card-body">
                  <div class="stats-box mb-3">
                    <div class="stat-item">
                      <span class="stat-label">üìà ‡∏°‡∏¥‡πÄ‡∏ï‡∏≠‡∏£‡πå‡∏™‡∏π‡∏á‡∏™‡∏∏‡∏î:</span>
                      <span class="stat-value" id="house2_monthly_max">-</span>
                    </div>
                    <div class="stat-item">
                      <span class="stat-label">üìâ ‡∏°‡∏¥‡πÄ‡∏ï‡∏≠‡∏£‡πå‡∏ï‡πà‡∏≥‡∏™‡∏∏‡∏î:</span>
                      <span class="stat-value" id="house2_monthly_min">-</span>
                    </div>
                    <div class="stat-item highlight">
                      <span class="stat-label">üìä ‡∏Ñ‡πà‡∏≤‡πÄ‡∏â‡∏•‡∏µ‡πà‡∏¢:</span>
                      <span class="stat-value" id="house2_monthly_avg">-</span>
                    </div>
                  </div>
                </div>
                <div class="card-body p-0">
                  <div
                    id="chart_monthly_house2"
                    style="height: 250px; width: 100%"
                  >
                    <div
                      class="d-flex justify-content-center align-items-center h-100 text-muted"
                    >
                      <span
                        ><i class="fas fa-spinner fa-spin me-2"></i>
                        ‡πÇ‡∏´‡∏•‡∏î...</span
                      >
                    </div>
                  </div>
                </div>
              </div>
            </div>
            <div class="col-md-4">
              <div class="card">
                <div class="card-header">
                  <i class="fas fa-home me-2 text-danger"></i> ‡∏ö‡πâ‡∏≤‡∏ô‡∏ó‡∏µ‡πà 3
                  (‡∏£‡∏≤‡∏¢‡πÄ‡∏î‡∏∑‡∏≠‡∏ô)
                </div>
                <div class="card-body">
                  <div class="stats-box mb-3">
                    <div class="stat-item">
                      <span class="stat-label">üìà ‡∏°‡∏¥‡πÄ‡∏ï‡∏≠‡∏£‡πå‡∏™‡∏π‡∏á‡∏™‡∏∏‡∏î:</span>
                      <span class="stat-value" id="house3_monthly_max">-</span>
                    </div>
                    <div class="stat-item">
                      <span class="stat-label">üìâ ‡∏°‡∏¥‡πÄ‡∏ï‡∏≠‡∏£‡πå‡∏ï‡πà‡∏≥‡∏™‡∏∏‡∏î:</span>
                      <span class="stat-value" id="house3_monthly_min">-</span>
                    </div>
                    <div class="stat-item highlight">
                      <span class="stat-label">üìä ‡∏Ñ‡πà‡∏≤‡πÄ‡∏â‡∏•‡∏µ‡πà‡∏¢:</span>
                      <span class="stat-value" id="house3_monthly_avg">-</span>
                    </div>
                  </div>
                </div>
                <div class="card-body p-0">
                  <div
                    id="chart_monthly_house3"
                    style="height: 250px; width: 100%"
                  >
                    <div
                      class="d-flex justify-content-center align-items-center h-100 text-muted"
                    >
                      <span
                        ><i class="fas fa-spinner fa-spin me-2"></i>
                        ‡πÇ‡∏´‡∏•‡∏î...</span
                      >
                    </div>
                  </div>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
      <!-- === ‡πÅ‡∏ó‡πá‡∏ö Admin === -->
      <div class="tab-pane fade" id="admin" role="tabpanel">
          <div class="row mb-4">
            <div class="col-md-6">
              <div class="card">
                <div class="card-header bg-info text-white">
                  <i class="fas fa-plus-circle me-2"></i> ‡πÄ‡∏û‡∏¥‡πà‡∏°‡∏ö‡πâ‡∏≤‡∏ô‡πÉ‡∏´‡∏°‡πà
                </div>
                <div class="card-body">
                  <form id="addHouseForm">
                    <div class="mb-3">
                      <label for="houseName" class="form-label">‡∏ä‡∏∑‡πà‡∏≠‡∏ö‡πâ‡∏≤‡∏ô</label>
                      <input
                        type="text"
                        class="form-control"
                        id="houseName"
                        required
                      />
                    </div>
                    <div class="mb-3">
                      <label for="ownerName" class="form-label"
                        >‡∏ä‡∏∑‡πà‡∏≠-‡∏ô‡∏≤‡∏°‡∏™‡∏Å‡∏∏‡∏•‡πÄ‡∏à‡πâ‡∏≤‡∏Ç‡∏≠‡∏á‡∏ö‡πâ‡∏≤‡∏ô</label
                      >
                      <input
                        type="text"
                        class="form-control"
                        id="ownerName"
                        required
                      />
                    </div>
                    <div class="mb-3">
                      <label for="ownerAddress" class="form-label"
                        >‡∏ó‡∏µ‡πà‡∏≠‡∏¢‡∏π‡πà</label
                      >
                      <textarea
                        class="form-control"
                        id="ownerAddress"
                        rows="2"
                        required
                      ></textarea>
                    </div>
                    <div class="mb-3">
                      <label for="ownerPhone" class="form-label"
                        >‡πÄ‡∏ö‡∏≠‡∏£‡πå‡πÇ‡∏ó‡∏£‡∏®‡∏±‡∏û‡∏ó‡πå</label
                      >
                      <input
                        type="tel"
                        class="form-control"
                        id="ownerPhone"
                        pattern="[0-9]{10}"
                        required
                      />
                    </div>
                    <button type="submit" class="btn btn-success">
                      <i class="fas fa-plus"></i> ‡πÄ‡∏û‡∏¥‡πà‡∏°‡∏ö‡πâ‡∏≤‡∏ô
                    </button>
                    <div id="addHouseMsg" class="mt-2"></div>
                  </form>
                </div>
              </div>
            </div>
            <div class="col-md-6">
              <div class="card">
                <div class="card-header bg-danger text-white">
                  <i class="fas fa-trash-alt me-2"></i> ‡∏•‡∏ö‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏°‡∏¥‡πÄ‡∏ï‡∏≠‡∏£‡πå‡∏ó‡∏µ‡πà‡∏ú‡∏¥‡∏î
                </div>
                <div class="card-body">
                  <div class="table-responsive readings-scroll">
                    <table class="table table-bordered table-hover"id="deleteDataTable">
                      <thead>
                        <tr>
                          <th>‡∏ö‡πâ‡∏≤‡∏ô</th>
                          <th>‡∏Ñ‡πà‡∏≤</th>
                          <th>‡πÄ‡∏ß‡∏•‡∏≤</th>
                          <th>‡∏•‡∏ö</th>
                        </tr>
                      </thead>
                      <tbody>
                        <!-- Data will be loaded here by JS -->
                      </tbody>
                    </table>
                  </div>
                </div>
              </div>
            </div>
          </div>
          <!-- ‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£‡∏ö‡πâ‡∏≤‡∏ô‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î -->
           <div class="card mt-4">
            <div class="card-header bg-primary text-white">
              <i class="fas fa-home"></i> ‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£‡∏ö‡πâ‡∏≤‡∏ô‡πÉ‡∏ô‡∏£‡∏∞‡∏ö‡∏ö
            </div>
            <div class="card-body">
              <div class="row" id="housesContainer"></div>
            </div>
          </div>
        </div>
      </div>

    <script
      type="text/javascript"
      src="https://www.gstatic.com/charts/loader.js"
    ></script>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <script type="module" src="script.js"></script>
  </body>
</html>
